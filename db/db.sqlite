CREATE TABLE IF NOT EXISTS usuario (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    nombre_usuario VARCHAR(255) NOT NULL,
    passwd_hasheada VARCHAR(255) NOT NULL,
    UNIQUE(nombre_usuario)
);

CREATE TABLE IF NOT EXISTS transaccion (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    id_emisor INTEGER NOT NULL DEFAULT -1,
    id_receptor INTEGER NOT NULL DEFAULT -1,
    fecha_envio INTEGER NOT NULL DEFAULT (datetime('now','localtime')),
    fecha_recepcion INTEGER,
    FOREIGN KEY (id_emisor) REFERENCES usuario(id) ON UPDATE CASCADE ON DELETE SET DEFAULT,
    FOREIGN KEY (id_receptor) REFERENCES usuario(id) ON UPDATE CASCADE ON DELETE SET DEFAULT
);

CREATE TABLE IF NOT EXISTS login (
    id INTEGER PRIMARY KEY NOT NULL,
    token VARCHAR(255) NOT NULL
);